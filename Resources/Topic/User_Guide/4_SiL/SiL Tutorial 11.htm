<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="_Skins_HTML5_Side" lang="en" xml:lang="en" data-mc-search-type="Stem" data-mc-help-system-file-name="COSYM_Online_Help.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="About COSYM|SiL Overview|[%=System.LinkedTitle%]">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="shortcut icon" href="../../../../Skins/Favicons/favicon_3.ico" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon_2.ico" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon_1.ico" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon.ico" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Connecting 3rd Party Tool</title>
        <link href="../../../TableStyles/note.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../Stylesheets/ETAS_flare_EN.css" rel="stylesheet" type="text/css" />
        <meta name="Product" content="COSYM" />
        <meta name="Version" content="V3.4.1" />
        <meta name="Revision" content="R01 EN - 05.2024" />
        <meta name="Copyright Year" content="2024" />
        <meta name="Doc Type" content="User Guide" />
        <script src="../../../Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../Help.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div id="mc-main-content" role="main" data-mc-content-body="True">
                                    <h2>Connecting 3<sup>rd</sup> Party Tool</h2>
                                    <h3>Pre-requisites to run the python scripts</h3>
                                    <p>It is necessary to install the packages listed below to run the tutorial example.</p>
                                    <ul>
                                        <li class="list"><b><a name="kanchor60"></a>COSYM <span class="mc-variable etas.Prod_version variable">V3.4.1</span></b>
                                        </li>
                                        <li class="list"><b>Python 3.7 </b> (64-bit version recommended)<br />Python is an open source software and can be downloaded from the link; <a href="https://www.python.org/downloads/"><br />https://www.python.org/downloads/</a><ul><li class="list2">Choose Python 3.7.1</li><li class="list2">Download the Windows x86-64 executable installer.</li><li class="list2">The path should be added to the PATH environment variable. While installing, select the checkbox to add the installation path to PATH environment variable.</li></ul></li>
                                        <li class="list"><b>Pip</b>
                                            <br />Pip is a tool which helps to install libraries associated with Python:<ul><li class="list2">Open the link "<a href="https://bootstrap.pypa.io/get-pip.py">https://bootstrap.pypa.io/get-pip.py</a>"</li><li class="list2">Right click and save the file named '<span class="code">get-pip.py</span>’ in your local system.</li><li class="list2">Open a command prompt and go to the directory where ‘<span class="code">get-pip.py’</span> file is saved (using "cd &lt;directory path name&gt;").</li><li class="list2">Run the script : "<span class="code">python get-pip.py</span>”</li><li class="list2">Run the command : "<span class="code">pip --version</span>”<br />This will show the installed pip version, if installation is successful.</li></ul></li>
                                        <li class="list"><b>NumPy</b>
                                            <ul>
                                                <li class="list2">Open a command prompt and execute the command below:<br /> “<span class="code">pip install numpy</span>”</li>
                                            </ul>
                                        </li>
                                        <li class="list"><b>Avro</b>
                                            <ul>
                                                <li class="list2">Open a command prompt and execute the command below:<br />"<span class="code">pip install avro-python3</span>"<br /></li>
                                            </ul>
                                        </li>
                                        <li class="list">Add &lt;COSYM Installation location&gt;<span class="code">\Simulator\win64\atssimulator\PythonBindings</span> to Environment Variable, 'PYTHONPATH'.</li>
                                        <li class="list">Python script location<br />The python scripts are  available at &lt;<a href="../1_I/COSYM Demo Data.htm" class="Heading_only MCXref xref xrefHeading_only">COSYM Demo Data</a>&gt;<span class="code">\Samples\PythonScripts</span></li>
                                    </ul>
                                    <table style="width: 100%;mc-table-style: url('../../../TableStyles/note.css');" class="TableStyle-note" cellspacing="0">
                                        <col class="TableStyle-note-Column-Column1" />
                                        <thead>
                                            <tr class="TableStyle-note-Head-Header1">
                                                <th class="TableStyle-note-HeadD-Column1-Header1">
                                                    <p class="note_Header" data-mc-autonum="Note"><span class="autonumber"><span>Note</span></span>&#160;</p>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="TableStyle-note-Body-Body1">
                                                <td class="TableStyle-note-BodyA-Column1-Body1">
                                                    <p class="table_default">The <span class="code">PyEnvSettings.bat</span> (which is available at &lt;<a href="../1_I/COSYM Demo Data.htm" class="Heading_only MCXref xref xrefHeading_only">COSYM Demo Data</a>&gt;<span class="code">\Samples\PythonScripts</span>) has to be executed every time from the scripts location  before opening a new command prompt to run the python scripts. This will set all additional environment variables necessary to run the scripts.</p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <h3>Demo Project</h3>
                                    <p>The demo project, <span class="code">External_models.csp</span> is available in the COSYM demo data location (COSYM Demo Data). Unzip the <span class="code">Samples.zip</span> file which is available in the COSYM demo data. The <span class="code">External_models.csp</span> project is located at <span class="code">\SiL\External_models</span> sub-folder in the unzipped <span class="code">\Samples</span> folder.</p>
                                    <p>The <span class="code">deployables.zip</span> and <span class="code">configfiles.zip</span> are generated after the successful build process of a system and these files are available at &lt;project location&gt;<span class="code">\External_models\Systems\System\Configuration\OS\codegen</span> folder. Copy this codegen folder and place it in the python script location.</p>
                                    <h3>About the "External_models" Example Project</h3>
                                    <p>In this example project, two external models are connected to each other as depicted below. Each model has one inport, one outport and two calibration variables.</p>
                                    <p class="paragraph"><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../../Images/tutorial11.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="830" data-mc-height="299" src="../../../Images/tutorial11_thumb_0_150.png" tabindex="" /></a>
                                    </p>
                                    <h4>Connection between models</h4>
                                    <p>Outport of External Model 1 (Ext1/Out1) is connected to inport of External Model2 (Ext2/In1) and Outport of External Model 2 (Ext2/Out1) is connected to inport of External Model1 (Ext1/In1).</p>
                                    <h4>Workflow for External Model 1(Ext1)</h4>
                                    <p>In the init function, calibration variable (Ext1/CVariable1) and inport (Ext1/In1) is initialized to 0. In the step function, the inport and calibration variable is added and assigned to outport (Ext1/Out1), until the value of outport reached 5000. You can find the details about the init function in the <span class="code">External_Model_Loader</span> python script which is available at <span class="code">\ETASData\COSYM3.3\Samples\PythonScripts\</span>.</p>
                                    <h4>Workflow for External Model 2 (Ext2)</h4>
                                    <p>In the init function, calibration variable (Ext2/CVariable1) is initialized to value 5 and inport (Ext2/In1) is initialized to 0. In the step function, the inport and calibration variable is added and assigned to outport (Ext2/Out1), until the value of inport reached 5000.  You find details about the init function in the External_Model_Loader python script <span class="code">\ETASData\COSYM3.3\Samples\PythonScripts\External_Model_Loader_Ext2.py</span>.</p>
                                    <p>When the simulation starts, inports and outports of all the models will be incremented, till the value reaches 5000. After that simulation will be stopped, and the project is undeployed. These functions are implemented in the python scripts using the target client python APIs.</p>
                                    <h4>Example Python scripts for third party tool connection</h4>
                                    <h5><span class="code">External_Model_Loader_Ext1.py</span>
                                    </h5>
                                    <p>This python script shall load the External Model 1 (Ext1). It will be the master and performs the control operations like deploy, start/stop simulations. This script will wait until the External Model 2 is connected.</p>
                                    <h5><span class="code">External_Model_Loader_Ext2.py</span>
                                    </h5>
                                    <p>This python script shall load the External Model 2 (Ext2) and connects to the master process.</p>
                                    <h5><span class="code">Connect_to_Sil.py</span>
                                    </h5>
                                    <p>This script will connect to the running simulations. It will write value 10 to a calibration variable (Ext2/CVariable2) and reads back the value and verifies if both are same.</p>
                                    <p class="how_to_title">Steps for executing the demo projects using python scripts</p>
                                    <ul>
                                        <li>Open command prompt from the scripts folder and execute the "<span class="code">PyEnvSettings.bat</span>" file. This will set the environment variables necessary for the python scripts.</li>
                                        <li>Run the below command to load the first external model. This process will act as a master, which shall deploy, start, and stop the simulation. </li>
                                    </ul>
                                    <p><span class="code">python External_Model_Loader_Ext1.py</span>
                                    </p>
                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../../Images/tutorial11_2.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="1103" data-mc-height="639" src="../../../Images/tutorial11_2_thumb_0_150.png" tabindex="" /></a>
                                    </p>
                                    <p>As shown in the above Figure, the process will be waiting until the 2<sup>nd</sup> external model is connected.</p>
                                    <ul>
                                        <li>Open another command prompt from the same location and setup the environment as mentioned in step 1. Run the below command to load the 2<sup>nd</sup> external model. This process will act as a slave.</li>
                                    </ul>
                                    <p><span class="code">python External_Model_Loader_Ext2.py</span>
                                    </p>
                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../../Images/tutorial11_3.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="976" data-mc-height="927" src="../../../Images/tutorial11_3_thumb_0_150.png" tabindex="" /></a>
                                    </p>
                                    <p>As shown in the Figure, both the models will start running, and exchanges the data as per the connection of inports and outports. The value of inports and ouports will be incremented till 5000 and this can be seen in the command prompt as shown below. Once the value reaches 5000, the master model stops the simulation and undeploys the project, thereafter the processes will be exited. It takes less than a minute to complete the execution.</p>
                                    <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../../Images/tutorial11_4.png"><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="960" data-mc-height="975" src="../../../Images/tutorial11_4_thumb_0_150.png" tabindex="" /></a>
                                    </p>
                                    <ul>
                                        <li>While the simulation is running, we can connect to the running simulation and access the calibration variables using <span class="code">Connect_to_sil.py</span> script. Open another command prompt and setup the environment as mentioned in step 1. Then run the below command.</li>
                                    </ul>
                                    <p><span class="code">python Connect_to_Sil.py</span>
                                    </p>
                                    <p>If the value written to the calibration variable matches with the value read from the same variable, it displays SUCCESS, else throws FAILURE exception.</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>